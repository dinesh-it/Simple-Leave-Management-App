function liquidFillGaugeDefaultSettings(){return{minValue:0,maxValue:100,circleThickness:.05,circleFillGap:.05,circleColor:"#178BCA",waveHeight:.05,waveCount:1,waveRiseTime:1E3,waveAnimateTime:18E3,waveRise:!0,waveHeightScaling:!0,waveAnimate:!0,waveColor:"#178BCA",waveOffset:0,textVertPosition:.5,textSize:1,valueCountUp:!0,displayPercent:!0,textColor:"#045681",waveTextColor:"#A4DBf8"}}
function loadLiquidFillGauge(g,p,a){function x(){h.attr("transform","translate("+q(h.attr("T"))+",0)");h.transition().duration(a.waveAnimateTime*(1-h.attr("T"))).ease("linear").attr("transform","translate("+q(1)+",0)").attr("T",1).each("end",function(){h.attr("T",0);x(a.waveAnimateTime)})}null==a&&(a=liquidFillGaugeDefaultSettings());var c=d3.select("#"+g),b=Math.min(parseInt(c.style("width")),parseInt(c.style("height")))/2,y=parseInt(c.style("width"))/2-b,J=parseInt(c.style("height"))/2-b,z=Math.max(a.minValue,
Math.min(a.maxValue,p))/a.maxValue,A;A=a.waveHeightScaling?d3.scale.linear().range([0,a.waveHeight,0]).domain([0,50,100]):d3.scale.linear().range([a.waveHeight,a.waveHeight]).domain([0,100]);var B=a.textSize*b/2,m=parseFloat(p).toFixed(2);p=a.valueCountUp?a.minValue:m;var r=a.displayPercent?"%":"",C=a.circleThickness*b,n=C+a.circleFillGap*b,f=b-n,t=f*A(100*z),d=1+a.waveCount,u=2*f/a.waveCount*d,k=function(a){return Math.round(a)};parseFloat(m)!=parseFloat(k(m))&&(k=function(a){return parseFloat(a).toFixed(1)});
parseFloat(m)!=parseFloat(k(m))&&(k=function(a){return parseFloat(a).toFixed(2)});for(var D=[],l=0;l<=40*d;l++)D.push({x:l/(40*d),y:l/40});var E=d3.scale.linear().range([0,2*Math.PI]).domain([0,1]),F=d3.scale.linear().range([0,b]).domain([0,b]),K=d3.scale.linear().range([0,u]).domain([0,1]),L=d3.scale.linear().range([0,t]).domain([0,1]),d=d3.scale.linear().range([n+2*f+t,n-t]).domain([0,1]),q=d3.scale.linear().range([0,u-2*f]).domain([0,1]),l=d3.scale.linear().range([n+2*f,n+.7*B]).domain([0,1]),
c=c.append("g").attr("transform","translate("+y+","+J+")"),y=d3.svg.arc().startAngle(E(0)).endAngle(E(1)).outerRadius(F(b)).innerRadius(F(b-C));c.append("path").attr("d",y).style("fill",a.circleColor).attr("transform","translate("+b+","+b+")");var G=c.append("text").text(k(p)+r).attr("class","liquidFillGaugeText").attr("text-anchor","middle").attr("font-size",B+"px").style("fill",a.textColor).attr("transform","translate("+b+","+l(a.textVertPosition)+")"),H=d3.svg.area().x(function(a){return K(a.x)}).y0(function(b){return L(Math.sin(2*
Math.PI*a.waveOffset*-1+2*Math.PI*(1-a.waveCount)+2*b.y*Math.PI))}).y1(function(a){return 2*f+t}),v=c.append("defs").append("clipPath").attr("id","clipWave"+g),h=v.append("path").datum(D).attr("d",H).attr("T",0);g=c.append("g").attr("clip-path","url(#clipWave"+g+")");g.append("circle").attr("cx",b).attr("cy",b).attr("r",f).style("fill",a.waveColor);var I=g.append("text").text(k(p)+r).attr("class","liquidFillGaugeText").attr("text-anchor","middle").attr("font-size",B+"px").style("fill",a.waveTextColor).attr("transform",
"translate("+b+","+l(a.textVertPosition)+")");a.valueCountUp&&(b=function(){var a=d3.interpolate(this.textContent,m);return function(b){this.textContent=k(a(b))+r}},G.transition().duration(a.waveRiseTime).tween("text",b),I.transition().duration(a.waveRiseTime).tween("text",b));var w=n+2*f-u;a.waveRise?v.attr("transform","translate("+w+","+d(0)+")").transition().duration(a.waveRiseTime).attr("transform","translate("+w+","+d(z)+")").each("start",function(){h.attr("transform","translate(1,0)")}):v.attr("transform",
"translate("+w+","+d(z)+")");a.waveAnimate&&x();return new function(){this.update=function(b){var e=parseFloat(b).toFixed(2),c=function(a){return Math.round(a)};parseFloat(e)!=parseFloat(c(e))&&(c=function(a){return parseFloat(a).toFixed(1)});parseFloat(e)!=parseFloat(c(e))&&(c=function(a){return parseFloat(a).toFixed(2)});e=function(){var a=d3.interpolate(this.textContent,parseFloat(b).toFixed(2));return function(b){this.textContent=c(a(b))+r}};G.transition().duration(a.waveRiseTime).tween("text",
e);I.transition().duration(a.waveRiseTime).tween("text",e);var e=Math.max(a.minValue,Math.min(a.maxValue,b))/a.maxValue,d=f*A(100*e),e=d3.scale.linear().range([n+2*f+d,n-d]).domain([0,1])(e),k=d3.scale.linear().range([0,u]).domain([0,1]),l=d3.scale.linear().range([0,d]).domain([0,1]),g;g=a.waveHeightScaling?d3.svg.area().x(function(a){return k(a.x)}).y0(function(b){return l(Math.sin(2*Math.PI*a.waveOffset*-1+2*Math.PI*(1-a.waveCount)+2*b.y*Math.PI))}).y1(function(a){return 2*f+d}):H;var m=a.waveAnimate?
q(1):0;h.transition().duration(0).transition().duration(a.waveAnimate?a.waveAnimateTime*(1-h.attr("T")):a.waveRiseTime).ease("linear").attr("d",g).attr("transform","translate("+m+",0)").attr("T","1").each("end",function(){a.waveAnimate&&(h.attr("transform","translate("+q(0)+",0)"),x(a.waveAnimateTime))});v.transition().duration(a.waveRiseTime).attr("transform","translate("+w+","+e+")")}}};
